---
import Layout from '../components/Layout.astro';
import CaseStudyCard from '../components/CaseStudyCard.astro';
import { getWorkProjects, urlFor } from '../lib/sanity';

const workEntries = await getWorkProjects();
const sortedWork = workEntries.sort((a: any, b: any) => (a.order || 0) - (b.order || 0));
---

<Layout title="Case Studies - Mark Stenquist" description="Frontend architecture case studies showcasing AI integration, performance optimization, and scalable solutions for venture-backed startups.">
	<!-- Hero Section -->
	<section class="text-center mb-12">
				<h1 class="text-5xl font-black text-gray-900 mb-4">Recent Work</h1>
				<p class="text-xl text-gray-600 max-w-3xl mx-auto">
					Examples of the quality of work I've delivered for clients
				</p>
	</section>

	<!-- Case Studies Grid -->
	<div class="grid md:grid-cols-2 gap-8">
		{sortedWork.length === 0 ? (
			<div class="col-span-full text-center py-16">
				<div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6">
					<span class="text-4xl">ðŸ’¼</span>
				</div>
				<h2 class="text-2xl font-bold text-gray-900 mb-4">No work entries yet</h2>
				<p class="text-gray-600 mb-8">Add work entries in Sanity Studio to display them here.</p>
				<a 
					href="/studio" 
					class="inline-block bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors"
				>
					Add Work
				</a>
			</div>
		) : (
			sortedWork.map((work: any) => (
				<CaseStudyCard 
					title={work.title}
					category={work.category}
					description={work.description}
					challenge={work.challenge}
					solution={work.solution}
					website={work.website}
					image={work.featuredImage ? urlFor(work.featuredImage).width(600).height(400).url() : undefined}
				/>
			))
		)}
	</div>

	<!-- CTA Section -->
	<section class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-sm border border-blue-100 p-8 md:p-12 mt-16 text-center">
				<h2 class="text-3xl font-bold text-gray-900 mb-4">Ready to Transform Your Frontend Architecture?</h2>
				<p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">Let's discuss how I can help scale your technical infrastructure and accelerate your growth.</p>
				<a href="/contact" class="inline-block bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors">Start a Conversation</a>
	</section>
</Layout>