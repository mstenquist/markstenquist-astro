---
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import '../styles/global.css';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<html lang="en">
	<head>
		<BaseHead title={title} description={description} />
		<style>
			/* Headings */
			.blog-content :global(h1) {
				font-size: 2.25rem !important;
				font-weight: 900 !important;
				color: #111827 !important;
				margin-top: 3rem !important;
				margin-bottom: 1.5rem !important;
				line-height: 1.2 !important;
			}
			.blog-content :global(h1:first-child) {
				margin-top: 0 !important;
			}
			.blog-content :global(h2) {
				font-size: 1.875rem !important;
				font-weight: 700 !important;
				color: #111827 !important;
				margin-top: 3rem !important;
				margin-bottom: 1.25rem !important;
				line-height: 1.3 !important;
			}
			.blog-content :global(h3) {
				font-size: 1.5rem !important;
				font-weight: 700 !important;
				color: #111827 !important;
				margin-top: 2.5rem !important;
				margin-bottom: 1rem !important;
				line-height: 1.4 !important;
			}
			.blog-content :global(h4) {
				font-size: 1.25rem !important;
				font-weight: 700 !important;
				color: #111827 !important;
				margin-top: 2rem !important;
				margin-bottom: 0.875rem !important;
				line-height: 1.4 !important;
			}
			.blog-content :global(h5) {
				font-size: 1.125rem !important;
				font-weight: 700 !important;
				color: #111827 !important;
				margin-top: 1.5rem !important;
				margin-bottom: 0.75rem !important;
				line-height: 1.5 !important;
			}
			.blog-content :global(h6) {
				font-size: 1rem !important;
				font-weight: 700 !important;
				color: #111827 !important;
				margin-top: 1.5rem !important;
				margin-bottom: 0.75rem !important;
				line-height: 1.5 !important;
			}
			
			/* Text elements */
			.blog-content :global(p) {
				font-size: 1.125rem !important;
				color: #374151 !important;
				line-height: 1.75 !important;
				margin-bottom: 1.5rem !important;
			}
			.blog-content :global(a) {
				color: #2563eb !important;
				font-weight: 600 !important;
				cursor: pointer !important;
				text-decoration: none !important;
			}
			.blog-content :global(a:hover) {
				color: #1d4ed8 !important;
			}
			.blog-content :global(strong) {
				font-weight: 700 !important;
				color: #111827 !important;
			}
			.blog-content :global(em) {
				font-style: italic !important;
				color: #4b5563 !important;
			}
			.blog-content :global(del) {
				text-decoration: line-through !important;
				color: #6b7280 !important;
			}
			
			/* Lists */
			.blog-content :global(ul), .blog-content :global(ol) {
				font-size: 1.125rem !important;
				color: #374151 !important;
				padding-left: 1.5rem !important;
				margin-top: 1.25rem !important;
				margin-bottom: 1.25rem !important;
			}
			.blog-content :global(li) {
				margin-bottom: 0.5rem !important;
				line-height: 1.75 !important;
			}
			.blog-content :global(ul) {
				list-style-type: disc !important;
			}
			.blog-content :global(ol) {
				list-style-type: decimal !important;
			}
			.blog-content :global(ul > li::marker) {
				color: #6b7280 !important;
			}
			.blog-content :global(ol > li::marker) {
				color: #6b7280 !important;
				font-weight: 400 !important;
			}
			.blog-content :global(li > ul), .blog-content :global(li > ol) {
				margin-top: 0.5rem !important;
				margin-bottom: 0 !important;
			}
			.blog-content :global(ul ul), .blog-content :global(ol ol), .blog-content :global(ul ol), .blog-content :global(ol ul) {
				margin-bottom: 0 !important;
				margin-top: 0.5rem !important;
			}
			
			/* Code */
			.blog-content :global(code) {
				background-color: #f3f4f6 !important;
				padding: 0.25rem 0.5rem !important;
				border-radius: 0.25rem !important;
				font-size: 0.875rem !important;
				font-family: ui-monospace, SFMono-Regular, "SF Mono", monospace !important;
			}
			.blog-content :global(pre) {
				background-color: #111827 !important;
				color: #f9fafb !important;
				padding: 1.5rem !important;
				border-radius: 0.5rem !important;
				overflow-x: auto !important;
				margin-top: 1.5rem !important;
				margin-bottom: 1.5rem !important;
			}
			.blog-content :global(pre code) {
				background-color: transparent !important;
				padding: 0 !important;
				color: inherit !important;
			}
			
			/* Blockquotes */
			.blog-content :global(blockquote) {
				border-left: 4px solid #3b82f6 !important;
				padding: 1.5rem !important;
				font-style: italic !important;
				color: #4b5563 !important;
				background-color: #eff6ff !important;
				border-radius: 0 0.5rem 0.5rem 0 !important;
				margin: 2rem 0 !important;
			}
			
			/* Tables */
			.blog-content :global(table) {
				width: 100% !important;
				border-collapse: collapse !important;
				margin: 2rem 0 !important;
				font-size: 1rem !important;
			}
			.blog-content :global(thead) {
				background-color: #f9fafb !important;
			}
			.blog-content :global(th) {
				border: 1px solid #e5e7eb !important;
				padding: 0.75rem 1rem !important;
				text-align: left !important;
				font-weight: 600 !important;
				color: #111827 !important;
			}
			.blog-content :global(td) {
				border: 1px solid #e5e7eb !important;
				padding: 0.75rem 1rem !important;
				color: #374151 !important;
			}
			.blog-content :global(tbody tr:nth-child(even)) {
				background-color: #f9fafb !important;
			}
			
			/* Other elements */
			.blog-content :global(hr) {
				border: none !important;
				border-top: 1px solid #e5e7eb !important;
				margin: 3rem 0 !important;
			}
			.blog-content :global(img) {
				border-radius: 0.5rem !important;
				box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
				margin: 2rem 0 !important;
				max-width: 100% !important;
				height: auto !important;
			}
		</style>
	</head>

	<body class="bg-gray-50">
		<Header />
		<main class="max-w-4xl mx-auto px-6 py-16 pt-32">
			<article>
				<!-- Hero Image -->
				{heroImage && (
					<div class="mb-12 -mx-6 sm:mx-0">
						<img 
							src={heroImage} 
							alt={title}
							class="w-full h-64 md:h-96 object-cover rounded-none sm:rounded-2xl shadow-lg"
							width={1020} 
							height={510}
						/>
					</div>
				)}

				<!-- Article Header -->
				<header class="mb-12 text-center">
					<div class="mb-6">
						<time class="text-sm text-gray-500 font-medium">
							<FormattedDate date={pubDate} />
						</time>
						{updatedDate && (
							<div class="text-sm text-gray-500 italic mt-1">
								Last updated on <FormattedDate date={updatedDate} />
							</div>
						)}
					</div>
					<h1 class="text-4xl md:text-5xl font-black text-gray-900 leading-tight">{title}</h1>
					
					<!-- Back to Blog Link -->
					<div class="mt-8">
						<a 
							href="/blog" 
							class="inline-flex items-center text-blue-600 hover:text-blue-700 font-semibold transition-colors cursor-pointer"
						>
							<svg class="mr-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
							</svg>
							Back to Blog
						</a>
					</div>
				</header>

				<!-- Article Content -->
				<div class="blog-content">
					<slot />
				</div>

				<!-- Article Footer -->
				<footer class="mt-16 pt-8 border-t border-gray-200">
					<div class="text-center">
						<a 
							href="/blog" 
							class="inline-flex items-center text-blue-600 hover:text-blue-700 font-semibold transition-colors cursor-pointer"
						>
							<svg class="mr-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
							</svg>
							Back to Blog
						</a>
					</div>
				</footer>
			</article>
		</main>
		<Footer />
	</body>
</html>
